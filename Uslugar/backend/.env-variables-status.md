# ğŸ“‹ Status Environment Varijabli - .env Fajl

## âœ… POSTAVLJENO (mogu se automatski dohvatiti)

### 1. SMTP Configuration âœ…
- **SMTP_PASS**: `c|1TYK4YqbF` âœ… **POSTAVLJEN**
  - PronaÄ‘eno u: `UPDATE-SMTP-AWS-SECRET.md`, `test-email-new.js`, `update-smtp-secret-aws.ps1`
- **SMTP_HOST**: `smtp.hostinger.com` âœ… **POSTAVLJEN** (umjesto Gmail)
- **SMTP_PORT**: `465` âœ… **POSTAVLJEN** (SSL umjesto TLS)
- **SMTP_USER**: `uslugar@oriphiel.hr` âœ… **POSTAVLJEN**

---

## âš ï¸ RUÄŒNO POSTAVI (ne mogu se automatski dohvatiti)

### 2. Stripe Keys âš ï¸

**STRIPE_SECRET_KEY:**
- **Gdje dobiti**: Stripe Dashboard â†’ Developers â†’ API keys â†’ Secret key
- **URL**: https://dashboard.stripe.com/apikeys
- **Test key**: PoÄinje sa `sk_test_...`
- **Live key**: PoÄinje sa `sk_live_...`
- **AWS Secrets Manager ARN**: `arn:aws:secretsmanager:eu-north-1:666203386231:secret:uslugar/stripe-secret-key-jKdcdD`
- **AWS CLI komanda** (ako imaÅ¡ pristup):
  ```bash
  aws secretsmanager get-secret-value --secret-id uslugar/stripe-secret-key --region eu-north-1 --query SecretString --output text
  ```

**STRIPE_PUBLISHABLE_KEY:**
- **Gdje dobiti**: Stripe Dashboard â†’ Developers â†’ API keys â†’ Publishable key
- **URL**: https://dashboard.stripe.com/apikeys
- **Test key**: PoÄinje sa `pk_test_...`
- **Live key**: PoÄinje sa `pk_live_...`
- **AWS Secrets Manager ARN**: `arn:aws:secretsmanager:eu-north-1:666203386231:secret:uslugar/stripe-publishable-key-37rvJI`
- **AWS CLI komanda** (ako imaÅ¡ pristup):
  ```bash
  aws secretsmanager get-secret-value --secret-id uslugar/stripe-publishable-key --region eu-north-1 --query SecretString --output text
  ```

**STRIPE_WEBHOOK_SECRET:**
- **Gdje dobiti**: Stripe Dashboard â†’ Developers â†’ Webhooks
- **URL**: https://dashboard.stripe.com/webhooks
- **Koraci**:
  1. Klikni "Add endpoint"
  2. **Endpoint URL**: `https://uslugar-backend.onrender.com/api/payments/webhook`
  3. **Events**: Odaberi:
     - `checkout.session.completed`
     - `invoice.payment_succeeded`
     - `invoice.payment_failed`
  4. Klikni "Add endpoint"
  5. Nakon kreiranja, klikni na webhook endpoint
  6. U sekciji "Signing secret", klikni "Reveal" i kopiraj vrijednost (poÄinje sa `whsec_...`)

---

### 3. eRaÄun API Key âš ï¸

**ERACUN_API_KEY:**
- **Gdje dobiti**: Porezna Uprava Portal
- **URL**: https://porezna-uprava.hr/
- **Koraci**:
  1. Prijavi se na Porezna Uprava Portal
  2. Idi na sekciju za **eRaÄun API** ili **Fiskalizaciju**
  3. Generiraj novi API key ili kopiraj postojeÄ‡i
  4. API key se koristi za fiskalizaciju faktura

**Test Environment** (opcionalno):
- **ERACUN_API_URL**: `https://cistest.apis.hr/api/v1/fiscalization`
- **Produkcija**: `https://cis.porezna-uprava.hr/api/v1/fiscalization` (veÄ‡ postavljeno)

---

## ğŸ“ Kako Postaviti Stripe Keys

### Opcija 1: Stripe Dashboard (PreporuÄeno)

1. **Prijavi se na Stripe**: https://dashboard.stripe.com/login
2. **Idi na API Keys**:
   - Developers â†’ API keys
   - Ili direktno: https://dashboard.stripe.com/apikeys
3. **Kopiraj kljuÄeve**:
   - **Secret key**: Klikni "Reveal test key" ili "Reveal live key" i kopiraj
   - **Publishable key**: VeÄ‡ je vidljiv, jednostavno kopiraj
4. **Za Webhook Secret**:
   - Developers â†’ Webhooks â†’ Add endpoint
   - Postavi URL: `https://uslugar-backend.onrender.com/api/payments/webhook`
   - Odaberi events i kopiraj signing secret

### Opcija 2: AWS Secrets Manager (ako imaÅ¡ pristup)

Ako imaÅ¡ AWS CLI konfiguriran i pristup Secrets Manager:

```bash
# Stripe Secret Key
aws secretsmanager get-secret-value \
    --secret-id uslugar/stripe-secret-key \
    --region eu-north-1 \
    --query SecretString \
    --output text

# Stripe Publishable Key
aws secretsmanager get-secret-value \
    --secret-id uslugar/stripe-publishable-key \
    --region eu-north-1 \
    --query SecretString \
    --output text
```

---

## ğŸ” Sigurnosne Napomene

1. **SMTP_PASS** âœ… - Postavljen iz koda, ali provjeri da je aktualan
2. **STRIPE keys** âš ï¸ - Moraju se dobiti iz Stripe Dashboard (ne mogu se automatski izvuÄ‡i)
3. **ERACUN_API_KEY** âš ï¸ - Mora se dobiti iz Porezna Uprava Portal (ne mogu se automatski izvuÄ‡i)

---

## ğŸ“‹ Checklist

- [x] SMTP_PASS postavljen (`c|1TYK4YqbF`)
- [x] SMTP_HOST postavljen (`smtp.hostinger.com`)
- [x] SMTP_PORT postavljen (`465`)
- [x] SMTP_USER postavljen (`uslugar@oriphiel.hr`)
- [ ] **STRIPE_SECRET_KEY** - Postavi iz Stripe Dashboard
- [ ] **STRIPE_PUBLISHABLE_KEY** - Postavi iz Stripe Dashboard
- [ ] **STRIPE_WEBHOOK_SECRET** - Postavi iz Stripe Dashboard (nakon kreiranja webhook-a)
- [ ] **ERACUN_API_KEY** - Postavi iz Porezna Uprava Portal

---

**Datum**: 2026-01-10  
**Status**: SMTP âœ… | Stripe âš ï¸ | eRaÄun âš ï¸

